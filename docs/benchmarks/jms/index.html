<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Benchmarks using the JMS API</title>
  <meta name="description" content="OpenMessaging is a cloud-oriented and vendor-neutral open standard for messaging, providing industry guidelines for areas such as finance, e-commerce, IoT and Big Data and oriented toward furthering messaging and streaming applications across heterogeneous systems and platforms.
">

  <link rel="stylesheet" href="/css/foundation.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/fontello.css">
  <link rel="stylesheet" href="/css/font-awesome.css">
  <link rel="stylesheet" href="/css/syntax.css">

  <script src="/javascripts/libs.js" type="text/javascript"></script>
  <script>
    var _hmt = _hmt || []; //define it for baidu seo

    // terrificjs bootstrap
    (function($) {
        $(document).ready(function() {
            var $page = $('body');
            var config = {
              dependencyPath: {
                plugin: 'javascripts/'
              }
            }
            var application = new Tc.Application($page, config);
            application.registerModules();
            application.start();

            //Add baidu seo
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?da02b4505574c2f46febdc0874af5c8b";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        });
    })(Tc.$);
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89603173-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-89603173-2');
  </script>

  <link href="http://fonts.googleapis.com/css?family=Raleway:400,700,300" media="screen" rel="stylesheet" type="text/css" />
  <script src="/javascripts/masonry.pkgd.js" type="text/javascript"></script>
  <script src="/javascripts/imagesloaded.pkgd.min.js" type="text/javascript"></script>
  <script src="/javascripts/slick.min.js" type="text/javascript"></script>

  <link rel="canonical" href="/docs/benchmarks/jms/">
  <link rel="alternate" type="application/rss+xml" title="OpenMessaging" href="/feed.xml" />
</head>


  <body>

    <a href="" id="top"></a>
<div style="width: 100%; background-color: rgb(235, 235, 235);">
    <div style="max-width: 80rem; margin: 0 auto; margin-bottom: 0; padding-left: 20px">
      <a class='' href="https://www.linuxfoundation.org/">
        <img alt="" src="/images/linux-foundation-logo.png" style="height: 18px" />
      </a>
    </div>
</div>
<div class='navbar contain-to-grid sticky'>
  <nav class='top-bar' data-options='sticky_on: large' data-topbar=''>
    <ul class='title-area'>
      <li class='name'>
        <h1>
          <a href="">
            <img alt="" src="/images/oms-logo.png" />
          </a>

        </h1>

      </li>
      <li class='toggle-topbar menu-icon'>
        <a href='#'>Menu</a>
      </li>
    </ul>
    <section class='top-bar-section'>
      <ul class="right">
        
          

          
            <li class="">
              <a href="/">Home</a>
            </li>
          
        
          

          
            <li class="has-dropdown ">
              <a href="/">Docs</a>
              <ul class='dropdown'>
                
                  <li>
                    <a href="/openmessaging-java">Java APIs</a>
                  </li>
                
                  <li>
                    <a href="/docs/benchmarks">Benchmarks</a>
                  </li>
                
              </ul>
            </li>
          
        
          

          
            <li class="">
              <a href="/blog">Blog</a>
            </li>
          
        
          

          
            <li class="">
              <a href="/community">Community</a>
            </li>
          
        
          

          
            <li class="">
              <a href="/members">Members</a>
            </li>
          
        
          

          
            <li class="has-dropdown ">
              <a href="/">About</a>
              <ul class='dropdown'>
                
                  <li>
                    <a href="/charter">Charter</a>
                  </li>
                
                  <li>
                    <a href="/contribution">Contribution</a>
                  </li>
                
              </ul>
            </li>
          
        
      </ul>
    </section>
  </nav>
</div>


    <div id='main' role='main'>
      <div class="full">
  <div class="row">
    <div class="large-9 columns">
      <div class="mod modBlogPost big no_bg">
        <h3><a href="/docs/benchmarks/jms/">Benchmarks using the JMS API</a></h3>
        <p>This tutorial shows you how to run OpenMessaging <a href="..">benchmarks</a> for any messaging system that supports the <a href="https://jakarta.ee/specifications/messaging/2.0/">JMS API</a>.</p>

<h2 id="initial-setup">Initial setup</h2>

<p>To being, you’ll need to clone the <a href="https://github.com/openmessaging/openmessaging-benchmark"><code class="highlighter-rouge">benchmark</code></a> repo from the <a href="https://github.com/openmessaging"><code class="highlighter-rouge">openmessaging</code></a> organization on <a href="https://github.com">GitHub</a>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone https://github.com/openmessaging/openmessaging-benchmark
<span class="nv">$ </span><span class="nb">cd </span>openmessaging-benchmark
</code></pre></div></div>

<p>You’ll also need to have <a href="https://maven.apache.org/install.html">Maven</a> installed.</p>

<h2 id="create-local-artifacts">Create local artifacts</h2>

<p>Once you have the repo cloned locally, you can create all the artifacts necessary to run the benchmarks with a single Maven command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mvn <span class="nb">install</span>
</code></pre></div></div>

<h2 id="deploy-your-cluster">Deploy your cluster</h2>

<p>You have to deploy your cluster and the benchmark client, this usually depends on your JMS system.</p>

<p>If you want to run the benchmark against Apache Pulsar or Apache Kafka you can follow the same instructions on the <a href="./pulsar.md">Pulsar Benchmark</a> and the <a href="./kafka.md">Kafka Benchmark</a> pages.</p>

<h2 id="providing-your-jms-driver-implementation">Providing your JMS Driver implementation</h2>

<p>The Benchmark does not provide any JMS driver, you have to add your driver in the “lib” directory of each worker node.
If you had already launched the worker nodes processes you have to restart them in order to see the new jars loaded.</p>

<p>Just drop the JMS jar file inside the “lib” directory.</p>

<p>In case you want to run the benchmark using some Pulsar JMS Client or Kafka JMS Client please ensure that the exising classes in “lib” do not clash with the classes bundled with the JMS driver.
In case of conflicts you will have to remove from “lib” the duplicated jars.</p>

<p>This benchmark has been currently tested with Apache ActiveMQ® Artemis, Confluent® Kafka JMS Client (that is not open source) and with the DataStax® Fast JMS Driver for Apache Pulsar (OpenSource - ASLv2 licensed https://github.com/datastax/pulsar-jms).</p>

<h2 id="configuring-the-jms-driver">Configuring the JMS driver</h2>

<p>The JMS Driver accepts these configuration options:</p>

<ul>
  <li><code class="highlighter-rouge">driverClass</code>: it must be <code class="highlighter-rouge">io.openmessaging.benchmark.driver.jms.JMSBenchmarkDriver</code></li>
  <li><code class="highlighter-rouge">connectionFactoryClassName</code>: the class that implements the <code class="highlighter-rouge">javax.jms.ConnectionFactory</code> class</li>
  <li><code class="highlighter-rouge">connectionFactoryConfigurationParam</code>: a string parameter to be passed to the constructor of the ConnectionFactory</li>
</ul>

<p>If the ConnectionFactory does not support a String configuration parameter the driver will try to interpret the String as a JSON struct and pass it to the constructor of the ConnectionFactory.</p>

<h2 id="delegating-setup-to-an-exising-benchmark-driver">Delegating setup to an exising Benchmark Driver</h2>

<p>Unfortunately the JMS API do not provide functions to manage the system, like creating topics or modifing configuration.
If you want to compare the results of running the Benchmark on Pulsar of Kafka with or without the JMS API you can delegate
the setup of the system to the native driver using the <code class="highlighter-rouge">delegateForAdminOperationsClassName</code> feature.</p>

<h2 id="running-the-benchmark-using-a-legacy-jms-1x-driver">Running the benchmark using a legacy JMS 1.x driver</h2>

<p>The JMS driver can run with a JMS 1.x driver, but in this case there are some limitations, in particular:</p>

<ul>
  <li>there is no non-blocking method to send messages</li>
  <li>there is no way to set the subscription name on the consumer side</li>
</ul>

<p>You can activate the 1.x mode by setting <code class="highlighter-rouge">use20api</code> to <code class="highlighter-rouge">false</code></p>


      </div>
    </div>
    <div class="large-3 columns" id="sidebar">
      <div class="links">
  <h3>Documentation</h3>
  <ul>
  
  
  
  
  
  
  
  
  
  <li><h4>Benchmarks</h4></li>
  <ul>
    
    <li><a href="/docs/benchmarks">Intro</a></li>
    
    <li><a href="/docs/benchmarks/rocketmq">Apache RocketMQ</a></li>
    
    <li><a href="/docs/benchmarks/pulsar">Apache Pulsar</a></li>
    
    <li><a href="/docs/benchmarks/kafka">Apache Kafka</a></li>
    
  </ul>
  
  
  
  
  
  
  
  
  
  
  
  
  
  </ul>
</div>
    </div>
  </div>
</div>
    </div>

    <div id='footer'>
  <div class='three spacing'></div>
  <div class='row'>
    <div class='large-7 medium-3 columns'>
      <h3>
        <a href='index.html'>
          <img alt="" src="/images/oms-white-logo.png" />
        </a>
      </h3>
      <p>Copyright &copy; 2017~2021 OpenMessaging Project, a Linux Foundation Collaborative Project. All Rights Reserved unless explicitly granted under an open source license.<br> The Linux Foundation is a registered trademark of The Linux Foundation. Linux is a registered trademark of Linus Torvalds.<br> Please see our <a href="https://www.linuxfoundation.org/terms" target="_blank">terms of use</a>, <a href="https://www.linuxfoundation.org/trademark-usage" target="_blank">trademark usage</a> and <a href=" https://www.linuxfoundation.org/privacy" target="_blank">privacy policy</a></p>
      <div class='spacing'></div>
      <div class='spacing'></div>
    </div>
    <div class='large-5 medium-5 columns'>
      <div class='spacing'></div>
      <h4>Contact us</h4>
      <ul>
        <li>&nbsp;&nbsp;&nbsp;<i class="fa fa-hand-o-right" ></i>&nbsp;&nbsp;&nbsp;<a href="https://groups.google.com/forum/#!forum/openmessaging">JOIN THE MAILING LIST</a></li>
      </ul>
      <div class='spacing'></div>
      <ul class='socials'>
        <li>
          <a href='https://twitter.com/Open_Messaging'>
            <i class='fa fa-twitter'></i>
          </a>
        </li>
        <li>
          <a href='https://github.com/openmessaging'>
            <i class='fa fa-github'></i>
          </a>
        </li>
        <li>
          <a href='https://openmessaging.herokuapp.com/'>
            <i class='fa fa-slack'></i>
          </a>
        </li>
      </ul>
      <div class='spacing'></div>
    </div>
  </div>
  <div class='two spacing'></div>
</div>

<script src="/javascripts/jquery.countTo.js" type="text/javascript"></script>
<script src="/javascripts/jquery.appear.js" type="text/javascript"></script>
<script src="/javascripts/jquery.validate.js" type="text/javascript"></script>
<script src="/javascripts/jquery.sequence-min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="/javascripts/app.js" type="text/javascript"></script>


  </body>

</html>
